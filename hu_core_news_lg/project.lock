preprocess:
  cmd: python -m spacy run preprocess
  script:
    - mkdir -p corpus/UD_Hungarian-Szeged
    - python -m spacy convert assets/UD_Hungarian-Szeged/hu_szeged-ud-train.conllu
      corpus/UD_Hungarian-Szeged/ --converter conllu --n-sents 10 --merge-subtokens
    - python -m spacy convert assets/UD_Hungarian-Szeged/hu_szeged-ud-dev.conllu corpus/UD_Hungarian-Szeged/
      --converter conllu --n-sents 10 --merge-subtokens
    - python -m spacy convert assets/UD_Hungarian-Szeged/hu_szeged-ud-test.conllu
      corpus/UD_Hungarian-Szeged/ --converter conllu --n-sents 10 --merge-subtokens
    - mv corpus/UD_Hungarian-Szeged/hu_szeged-ud-train.spacy corpus/UD_Hungarian-Szeged/train.spacy
    - mv corpus/UD_Hungarian-Szeged/hu_szeged-ud-dev.spacy corpus/UD_Hungarian-Szeged/dev.spacy
    - mv corpus/UD_Hungarian-Szeged/hu_szeged-ud-test.spacy corpus/UD_Hungarian-Szeged/test.spacy
  deps:
    - path: assets/UD_Hungarian-Szeged/hu_szeged-ud-train.conllu
      md5: e8581e733642908c106841fc1469ae89
    - path: assets/UD_Hungarian-Szeged/hu_szeged-ud-dev.conllu
      md5: 80ff7f86872655c1d7e3d5764387bc46
    - path: assets/UD_Hungarian-Szeged/hu_szeged-ud-test.conllu
      md5: dc824da852ac546914c331b58b0eb8f8
  outs:
    - path: corpus/UD_Hungarian-Szeged/train.spacy
      md5: ccb7f151ec17c3ba2178ecba612ceb09
    - path: corpus/UD_Hungarian-Szeged/dev.spacy
      md5: bb3c652b9a8d69a085a42a5c13f6f0ca
    - path: corpus/UD_Hungarian-Szeged/test.spacy
      md5: c2e9e1a1c49870e616ed6b5102b9ce9c
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
vectors:
  cmd: python -m spacy run vectors
  script:
    - bash -c '/bin/bzcat assets/vectors/webcorpuswiki.word2vec.bz2 > assets/vectors/webcorpuswiki.word2vec.txt'
    - python -m spacy init vectors hu assets/vectors/webcorpuswiki.word2vec.txt assets/vectors/webcorpuswiki.word2vec.vec
  deps:
    - path: assets/vectors/webcorpuswiki.word2vec.bz2
      md5: 4a3055c54a6f9a5f806ba09b21cb4583
  outs:
    - path: assets/vectors/webcorpuswiki.word2vec.vec
      md5: 2da0f7354b5a7dc80256c2ccac42cbe1
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
train:
  cmd: python -m spacy run train
  script:
    - python -m spacy train configs/default.cfg --output training/UD_Hungarian-Szeged
      --gpu-id -1 --paths.train corpus/UD_Hungarian-Szeged/train.spacy --paths.dev
      corpus/UD_Hungarian-Szeged/dev.spacy --nlp.lang=hu
  deps:
    - path: corpus/UD_Hungarian-Szeged/train.spacy
      md5: ccb7f151ec17c3ba2178ecba612ceb09
    - path: corpus/UD_Hungarian-Szeged/dev.spacy
      md5: bb3c652b9a8d69a085a42a5c13f6f0ca
    - path: configs/default.cfg
      md5: a0f8d844febee7b5fd82d9449c29409b
  outs:
    - path: training/UD_Hungarian-Szeged/model-best
      md5: dd846d28a815646ec1b3c600dc7f0574
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
preprocess_nerkor:
  cmd: python -m spacy run preprocess_nerkor
  script:
    - mkdir -p ../data/processed/NerKor
    - convert2conllu '../data/raw/NerKor/train-devel-test/devel/*/morph/*.conllup'
      ../data/processed/NerKor/dev.conllup
    - convert2conllu '../data/raw/NerKor/train-devel-test/train/*/morph/*.conllup'
      ../data/processed/NerKor/train.conllup
    - convert2conllu '../data/raw/NerKor/train-devel-test/test/*/morph/*.conllup'
      ../data/processed/NerKor/test.conllup
    - python -m spacy convert ../data/processed/NerKor/train.conllup ../data/processed/NerKor
      --converter conllu --n-sents 10
    - python -m spacy convert ../data/processed/NerKor/dev.conllup ../data/processed/NerKor
      --converter conllu --n-sents 10
    - python -m spacy convert ../data/processed/NerKor/test.conllup ../data/processed/NerKor
      --converter conllu --n-sents 10
  deps:
    - path: ../data/raw/NerKor
      md5: b950c6328675585a8377a7ef04ef6dd3
  outs:
    - path: ../data/processed/NerKor/train.conllup
      md5: 8bcd48d14fa16768c6915facd6c87ff8
    - path: ../data/processed/NerKor/dev.conllup
      md5: f01c64125d2ccea97b8725f23f5814af
    - path: ../data/processed/NerKor/test.conllup
      md5: 7d2c87db8693253457a995493c94c302
    - path: ../data/processed/NerKor/train.spacy
      md5: 25903e17770b9a155eadc9c1610ef7e4
    - path: ../data/processed/NerKor/dev.spacy
      md5: 329ad42262adab902e798f1d62ae4c45
    - path: ../data/processed/NerKor/test.spacy
      md5: e0638600c69e1b357c58177c92f4cce1
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
train_lemmatizer:
  cmd: python -m spacy run train_lemmatizer
  script:
    - lemmy train ../data/processed/NerKor/train.conllup ../models/lemmy-0.1.0.bin
    - lemmy evaluate ../models/lemmy-0.1.0.bin ../data/processed/NerKor/test.conllup
    - lemmy evaluate ../models/lemmy-0.1.0.bin ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-test.conllu
  deps:
    - path: ../data/processed/NerKor/train.conllup
      md5: 8bcd48d14fa16768c6915facd6c87ff8
    - path: ../data/processed/NerKor/test.conllup
      md5: 7d2c87db8693253457a995493c94c302
    - path: ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-test.conllu
      md5: dc824da852ac546914c331b58b0eb8f8
  outs:
    - path: ../models/lemmy-0.1.0.bin
      md5: 920f39a1cf53f1a2ac2414c702754dae
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
convert_vectors:
  cmd: python -m spacy run convert_vectors
  script:
    - bash -c '/bin/bzcat ../data/external/webcorpuswiki.word2vec.bz2 > ../data/external/webcorpuswiki.word2vec.txt'
    - python -m spacy init vectors hu ../data/external/webcorpuswiki.word2vec.txt
      ../data/external/webcorpuswiki.word2vec.vec
  deps:
    - path: ../data/external/webcorpuswiki.word2vec.bz2
      md5: 4a3055c54a6f9a5f806ba09b21cb4583
  outs:
    - path: ../data/external/webcorpuswiki.word2vec.vec
      md5: 2da0f7354b5a7dc80256c2ccac42cbe1
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
preprocess_ud:
  cmd: python -m spacy run preprocess_ud
  script:
    - mkdir -p ../data/processed/UD_Hungarian-Szeged
    - python -m spacy convert ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-train.conllu
      ../data/processed/UD_Hungarian-Szeged/ --converter conllu --n-sents 10 --merge-subtokens
    - python -m spacy convert ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-dev.conllu
      ../data/processed/UD_Hungarian-Szeged/ --converter conllu --n-sents 10 --merge-subtokens
    - python -m spacy convert ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-test.conllu
      ../data/processed/UD_Hungarian-Szeged/ --converter conllu --n-sents 10 --merge-subtokens
    - mv ../data/processed/UD_Hungarian-Szeged/hu_szeged-ud-train.spacy ../data/processed/UD_Hungarian-Szeged/train.spacy
    - mv ../data/processed/UD_Hungarian-Szeged/hu_szeged-ud-dev.spacy ../data/processed/UD_Hungarian-Szeged/dev.spacy
    - mv ../data/processed/UD_Hungarian-Szeged/hu_szeged-ud-test.spacy ../data/processed/UD_Hungarian-Szeged/test.spacy
  deps:
    - path: ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-train.conllu
      md5: e8581e733642908c106841fc1469ae89
    - path: ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-dev.conllu
      md5: 80ff7f86872655c1d7e3d5764387bc46
    - path: ../data/raw/UD_Hungarian-Szeged/hu_szeged-ud-test.conllu
      md5: dc824da852ac546914c331b58b0eb8f8
  outs:
    - path: ../data/processed/UD_Hungarian-Szeged/train.spacy
      md5: ccb7f151ec17c3ba2178ecba612ceb09
    - path: ../data/processed/UD_Hungarian-Szeged/dev.spacy
      md5: bb3c652b9a8d69a085a42a5c13f6f0ca
    - path: ../data/processed/UD_Hungarian-Szeged/test.spacy
      md5: c2e9e1a1c49870e616ed6b5102b9ce9c
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
init_vectors:
  cmd: python -m spacy run init_vectors
  script:
    - bash -c '/bin/bzcat ../data/external/webcorpuswiki.word2vec.bz2 > ../data/external/webcorpuswiki.word2vec.txt'
    - python -m spacy init vectors hu ../data/external/webcorpuswiki.word2vec.txt
      ../data/external/webcorpuswiki.word2vec.vec
  deps:
    - path: ../data/external/webcorpuswiki.word2vec.bz2
      md5: 4a3055c54a6f9a5f806ba09b21cb4583
  outs:
    - path: ../data/external/webcorpuswiki.word2vec.vec
      md5: 2da0f7354b5a7dc80256c2ccac42cbe1
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
train_parser:
  cmd: python -m spacy run train_parser
  script:
    - python -m spacy train configs/parser.cfg --output ../models/hu_core_news_lg-0.1.0
      --gpu-id -1 --nlp.lang=hu --paths.vectors ../data/external/webcorpuswiki.word2vec.vec
      --paths.train ../data/processed/UD_Hungarian-Szeged/train.spacy --paths.dev
      ../data/processed/UD_Hungarian-Szeged/dev.spacy
  deps:
    - path: ../data/processed/UD_Hungarian-Szeged/train.spacy
      md5: ccb7f151ec17c3ba2178ecba612ceb09
    - path: ../data/processed/UD_Hungarian-Szeged/dev.spacy
      md5: bb3c652b9a8d69a085a42a5c13f6f0ca
    - path: configs/parser.cfg
      md5: 1e7dc253b524a27b4cf4b4bc270921bd
  outs:
    - path: ../models/hu_core_news_lg-0.1.0/model-best
      md5: 9cbb0818f2fb6a902dce1c9888b67b11
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
train_ner:
  cmd: python -m spacy run train_ner
  script:
    - python -m spacy train configs/ner.cfg --output ../models/hu_core_news_lg-ner-0.1.0
      --nlp.lang=hu --gpu-id -1 --paths.vectors ../data/external/webcorpuswiki.word2vec.vec
      --paths.train ../data/processed/NerKor/train.spacy --paths.dev ../data/processed/NerKor/dev.spacy
  deps:
    - path: ../data/processed/NerKor/train.spacy
      md5: 25903e17770b9a155eadc9c1610ef7e4
    - path: ../data/processed/NerKor/dev.spacy
      md5: 329ad42262adab902e798f1d62ae4c45
    - path: ../data/processed/NerKor/test.spacy
      md5: e0638600c69e1b357c58177c92f4cce1
  outs:
    - path: ../models/hu_core_news_lg-ner-0.1.0/model-best
      md5: 4da107fcb3db302bb8cd96f11a04e1a1
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
package:
  cmd: python -m spacy run package
  script:
    - python -m spacy package ../models/hu_core_news_lg-0.1.0 ../packages --build
      'sdist, wheel' --code ../resources/package_init.py --name core_news_lg --version
      0.1.0 --force
  deps:
    - path: ../models/hu_core_news_lg-0.1.0
      md5: 0de3e2e41ff6151546932a9ec4ee51cd
  outs:
    - path: ../packages/hu_core_news_lg-0.1.0/dist/en_hu_core_news_lg-0.1.0.tar.gz
      md5: null
    - path: ../packages/hu_core_news_lg-0.1.0/dist/en_hu_core_news_lg-0.1.0-py3-none-any.whl
      md5: null
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
assemble:
  cmd: python -m spacy run assemble
  script:
    - spacy assemble configs/assemble.cfg -c ../huspacy/components.py -VV ../models/hu_core_news_lg-0.1.0
  deps:
    - path: ../models/hu_core_news_lg-parser-0.1.0/model-best
      md5: 9cbb0818f2fb6a902dce1c9888b67b11
    - path: ../models/hu_core_news_lg-ner-0.1.0/model-best
      md5: 4da107fcb3db302bb8cd96f11a04e1a1
    - path: ../huspacy/components.py
      md5: c70ef5a06c76a2f3c6d60cb40b18636b
  outs:
    - path: ../models/hu_core_news_lg-0.1.0/model-best
      md5: null
  spacy_version: 3.1.0
  spacy_git_version: 530b5d72f
